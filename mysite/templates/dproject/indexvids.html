{% extends "mysite/base.html" %}{% load staticfiles %}

{% block content %}
<div id="ytplayer"></div>

<script>
// Load the iFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// Replace the 'ytplayer' element with an <iframe> and
// YouTube player after the API code downloads.
var player;
function onYouTubePlayerAPIReady() {
  player = new YT.Player('ytplayer', {
// height: '480',
width: '100%',
videoId: '{{ vidId }}'
});
}
</script>

<div id="captions"></div>

{% comment %}
<div>vidId: {{ vidId }}</div>
{% if v %}
<div>db v: {{ v }}</div>
{% else%}
db v: unavailable
{% endif %}
{% endcomment %}

<div id="add_transcripts">
<h2>Add Transcript</h2>
{% if user.is_authenticated %}
{% load account %}
{% user_display user %}

{# transcript submit #}
  <!-- begin drafting form set -->
<form method="post" action="/transcript_submit/{{ vidId }}/">
  {% csrf_token %}
  {# language drop down #}
  {# manually rendering each field in order to control disabled lanuages on dropdown #}
  {# need logic here to check for existing language transcripts and then disable existing in dropdown #}
  <!-- hard coding drop down until I have a programmable solution -->
  <select id="id_language" name="language">
    <option selected="selected" disabled="disabled">Transcript language </option>
    <option {{ transcript_existence_af }} value="af">Afrikaans</option>
    <option {{ transcript_existence_id }} value="id">Bahasa Indonesia</option>
    <option {{ transcript_existence_etc }} value="ms">Bahasa Malaysia</option>
    <option {{ transcript_existence }} value="ca">Català</option>
    <option {{ transcript_existence }} value="cs">Čeština</option>
    <option {{ transcript_existence }} value="da">Dansk</option>
    <option {{ transcript_existence }} value="de">Deutsch</option>
    <option {{ transcript_existence }} value="et">Eesti</option>
    <option {{ transcript_existence }} value="en-GB">English (UK)</option>
    <option {{ transcript_existence }} value="en">English (US)</option>
    <option {{ transcript_existence }} value="es">Español (España)</option>
    <option {{ transcript_existence }} value="es-419">Español (Latinoamérica)</option>
    <option {{ transcript_existence }} value="eu">Euskara</option>
    <option {{ transcript_existence }} value="fil">Filipino</option>
    <option {{ transcript_existence }} value="fr">Français</option>
    <option {{ transcript_existence }} value="fr-CA">Français (Canada)</option>
    <option {{ transcript_existence }} value="gl">Galego</option>
    <option {{ transcript_existence }} value="hr">Hrvatski</option>
    <option {{ transcript_existence }} value="zu">IsiZulu</option>
    <option {{ transcript_existence }} value="is">Íslenska</option>
    <option {{ transcript_existence }} value="it">Italiano</option>
    <option {{ transcript_existence }} value="sw">Kiswahili</option>
    <option {{ transcript_existence }} value="lv">Latviešu valoda</option>
    <option {{ transcript_existence }} value="lt">Lietuvių</option>
    <option {{ transcript_existence }} value="hu">Magyar</option>
    <option {{ transcript_existence }} value="nl">Nederlands</option>
    <option {{ transcript_existence }} value="no">Norsk</option>
    <option {{ transcript_existence }} value="pl">Polski</option>
    <option {{ transcript_existence }} value="pt-PT">Português</option>
    <option {{ transcript_existence }} value="pt">Português (Brasil)</option>
    <option {{ transcript_existence }} value="ro">Română</option>
    <option {{ transcript_existence }} value="sk">Slovenčina</option>
    <option {{ transcript_existence }} value="sl">Slovenščina</option>
    <option {{ transcript_existence }} value="fi">Suomi</option>
    <option {{ transcript_existence }} value="sv">Svenska</option>
    <option {{ transcript_existence }} value="vi">Tiếng Việt</option>
    <option {{ transcript_existence }} value="tr">Türkçe</option>
    <option {{ transcript_existence }} value="bg">Български</option>
    <option {{ transcript_existence }} value="ru">Русский</option>
    <option {{ transcript_existence }} value="sr">Српски</option>
    <option {{ transcript_existence }} value="uk">Українська</option>
    <option {{ transcript_existence }} value="el">Ελληνικά</option>
    <option {{ transcript_existence }} value="iw">עברית</option>
    <option {{ transcript_existence }} value="ur">اردو</option>
    <option {{ transcript_existence }} value="ar">العربية</option>
    <option {{ transcript_existence }} value="fa">فارسی</option>
    <option {{ transcript_existence }} value="mr">मराठी</option>
    <option {{ transcript_existence }} value="hi">हिन्दी</option>
    <option {{ transcript_existence }} value="bn">বাংলা</option>
    <option {{ transcript_existence }} value="gu">ગુજરાતી</option>
    <option {{ transcript_existence }} value="ta">தமிழ்</option>
    <option {{ transcript_existence }} value="te">తెలుగు</option>
    <option {{ transcript_existence }} value="kn">ಕನ್ನಡ</option>
    <option {{ transcript_existence }} value="ml">മലയാളം </option>
    <option {{ transcript_existence }} value="th">ภาษาไทย</option>
    <option {{ transcript_existence }} value="am">አማርኛ</option>
    <option {{ transcript_existence }} value="zh-CN">中文 (简体)</option>
    <option {{ transcript_existence }} value="zh-TW">中文 (繁體)</option>
    <option {{ transcript_existence }} value="zh-HK">中文 (香港)</option>
    <option {{ transcript_existence }} value="ja">日本語</option>
    <option {{ transcript_existence }} value="ko">한국어</option>
  </select>
      (required) 

  {% comment %}
  {{ languages_array.management_form }}
  {% for languages in languages_array %}
    {{ languages }}
  {% endfor %}
  (required)
  {% endcomment %}
  <br />
  {# transcript form #}


  <!-- begin drafting timing set -->
  <!-- needs responsive -->
  <table id="transcripting">
    <tr>
      <th>time</th>
      <th>text</th>
      <th>insert row</th>
    </tr>
    <tr>
      <td><input id="n1" class="time" cols="100" min="0" type="number" placeholder="time" autocomplete="off" step="0.5"></td>
      <td><input id="f1" class="transcript_cell" maxlength="100" placeholder="text" type="text" autocomplete="off"></td>
      <!-- Add row disrupts tab flow and is lesser used. Therefore it should only appear on hover, focus, or similar event -->
      <td>+</td>
    </tr>
    <!-- end drafting timing set -->
    <!-- Might need to hard code addtranscript.transcript too unless input forms are easier than dropdowns -->
    {# {{ addtranscript.transcript }} (required) #}
    {# need jQuery to check if all required fields are chosen? #}
  </table>
  <input type="submit" value="Submit transcript" />
</form>
<!-- end drafting form set -->



{% else %}
<a href="/accounts/login/?next={{request.path}}">Log in to add your own transcript.</a>
{% endif %}
</div>
<dl>
  <dt>Transcription tips:</dt>
  <dd>make transcript first then set timing</dd>
  <dd>line break with "-" to show each line is a separate person speaking. Recommended only for simultaneous dialogue</dd>
  <dd>max line char is 100</dd>
  <dd>indicate music with this character: ♫</dd>
  <dd>time text half a second before dialogue appears. This gives the mind time to react and read the text with the action.</dd>
  <dd>keyboard shortcuts: </dd>
</dl>
<p>_________________</p>
<div id="Viewer">
  Select transcript
</div>
<div id="Editor">
  Select time | Text (with character limit) | Duration<br />
</div>
<div id="starp">Start / Stop</div>
<div id="skipBack">Skip back 1 second</div>
<div id="timeClick">Click for time display [test]</div>
<div id="vidCode">vidCode</div>
<div id="returnYT">returnYT</div>
<div id="playerExistenceIndicator">player.getDuration()</div>
<div id="timeStamp">Timestamp</div>

<select>
<div id="transcriptEdit">
  <option selected="selected">Choose another transcript language: </option>
   <option disabled="disabled">
   English (UK): 
    <div id="transcriptLine1">'ello, this a test of the CamStudio microphone.</div>
    <div id="transcriptLine2">It's just dangling from my ear.</div>
    <div id="transcriptLine3">Um, this is how we learn math.</div>
    <div id="transcriptLine4">Whoops!</div>
    <div id="transcriptLine5">Let's click click click delete "h."</div>
    <div id="transcriptLine6">Good.</div>
    <div id="transcriptLine7">Is it not recording?</div>
  </option>
   <option>
   English (US): 
    <div id="transcriptLine1">This a test of the CamStudio microphone.</div>
    <div id="transcriptLine2">It's just dangling from my ear.</div>
    <div id="transcriptLine3">Um, this is how we learn math.</div>
    <div id="transcriptLine4">Whoops!</div>
    <div id="transcriptLine5">Let's click click click delete "h."</div>
    <div id="transcriptLine6">Good.</div>
    <div id="transcriptLine7">Is it not recording?</div>
  </option>
</div>
<select>
<!-- DB views, template to access views, some kind of forms, validation of forms, key to access DB, {views: vid key from URL + ID, user or anon, language, chunk of transcript with times and content, rating},  -->
<div>
  <p>Edit your draft transcript</p>
  <p>When in edit mode, shrink vid 50%</p>
</div>

<div id="submitted_transcripts">
{% if t %}
<h2>Available Transcript{{ t|pluralize }} [make drop down]</h2>
{% else%}
<h2>No Transcripts</h2>
{% endif %}


<ol id="transcript">
{% if t %}
  {% for x in t %}
  <!-- commenting out for now until can truncate while still passing to var untrancated -->
  <!--<li id="transcriptDisplaySelect{{ forloop.counter }}"><a href="#">{{ x.transcript|truncatewords:25 }}</a></li>-->
  <!--<li class="transcriptDisplaySelect"><a href="#">{{ x.transcript|truncatewords:25 }}</a></li>-->
  <li class="transcriptDisplaySelect"><a href="#">{{ x.transcript|linebreaksbr }}</a></li>
  {% empty %}
  <p>Zero transcripts</p>
  {% endfor %}
</ol>
{% endif %}
</div>


{% endblock content %}

