{% extends "mysite/base.html" %}{% load staticfiles %}

{% block content %}
<div id="ytplayer"></div>

<script>
// Load the iFrame Player API code asynchronously.
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// Replace the 'ytplayer' element with an <iframe> and
// YouTube player after the API code downloads.
var player;
function onYouTubePlayerAPIReady() {
  player = new YT.Player('ytplayer', {
height: '480',
width: '100%',
videoId: '{{ vidId }}'
});
}
</script>

<div id="captions"></div>

<div>vidId: {{ vidId }}</div>
{% if v %}
<div>db v: {{ v }}</div>
{% else%}
db v: unavailable
{% endif %}

<div id="submitted_transcripts">
{% if t %}
<h2>Available Transcript{{ t|pluralize }}</h2>
{% else%}
<h2>No Transcripts</h2>
{% endif %}


<ol id="transcript">


{% if t %}
  {% for x in t %}
  <!-- commenting out for now until can truncate while still passing to var untrancated -->
  <!--<li id="transcriptDisplaySelect{{ forloop.counter }}"><a href="#">{{ x.transcript|truncatewords:25 }}</a></li>-->
  <!--<li class="transcriptDisplaySelect"><a href="#">{{ x.transcript|truncatewords:25 }}</a></li>-->
  <li class="transcriptDisplaySelect"><a href="#">{{ x.transcript|linebreaksbr }}</a></li>
  {% empty %}
  <p>Zero transcripts</p>
  {% endfor %}
</ol>
{% endif %}
</div>

<div id="add_transcripts">
<h2>Add Transcript</h2>
{% if user.is_authenticated %}
{% load account %}
{% user_display user %}

<form action="/transcript_submit/{{ vidId }}/" method="post">
  {% csrf_token %}
  {{ addtranscript.transcript }}
  <br />
  Transcript language: {{ languages_array.language }}
  <br />
  <input type="submit" value="Submit transcript" />
</form

{% else %}
<a href="/accounts/login/?next={{request.path}}">Log in to add your own transcript.</a>
{% endif %}
</div>

<p>_________________</p>
<div id="Viewer">
  Select transcript
</div>
<div id="Editor">
  Select time | Text (with character limit) | Duration<br />
</div>
<div id="starp">Start / Stop</div>
<div id="skipBack">Skip back 1 second</div>
<div id="timeClick">Click for time display [test]</div>
<div id="vidCode">vidCode</div>
<div id="returnYT">returnYT</div>
<div id="playerExistenceIndicator">player.getDuration()</div>
<div id="timeStamp">Timestamp</div>

<p>Note: numbering a list can be done programmatically.</p>
<select>
<div id="transcriptEdit">
  <option selected="selected">Choose another transcript language: </option>
   <option disabled="disabled">
   English (UK): 
    <div id="transcriptLine1">'ello, this a test of the CamStudio microphone.</div>
    <div id="transcriptLine2">It's just dangling from my ear.</div>
    <div id="transcriptLine3">Um, this is how we learn math.</div>
    <div id="transcriptLine4">Whoops!</div>
    <div id="transcriptLine5">Let's click click click delete "h."</div>
    <div id="transcriptLine6">Good.</div>
    <div id="transcriptLine7">Is it not recording?</div>
  </option>
   <option>
   English (US): 
    <div id="transcriptLine1">This a test of the CamStudio microphone.</div>
    <div id="transcriptLine2">It's just dangling from my ear.</div>
    <div id="transcriptLine3">Um, this is how we learn math.</div>
    <div id="transcriptLine4">Whoops!</div>
    <div id="transcriptLine5">Let's click click click delete "h."</div>
    <div id="transcriptLine6">Good.</div>
    <div id="transcriptLine7">Is it not recording?</div>
  </option>
</div>
<select>
<!-- DB views, template to access views, some kind of forms, validation of forms, key to access DB, {views: vid key from URL + ID, user or anon, language, chunk of transcript with times and content, rating},  -->
<div>
  <p>Edit your existing transcript</p>
  <p>Rate +/-</p>
  <p>When in edit mode, shrink vid 50%</p>
</div>


{% endblock content %}

